(function($){$.fn.pbl=function(ops){var options=$.extend({col:3,getImgData:function(){}},ops),_this=this;var col=options.col||3;for(var i=0;i<col;i+=1){var container=document.createElement('ul');container.className='col';container.style.width='calc(100% / '+col+' - 20px * '+(col-1)+' / '+col+')';_this.append(container)}function getMinUl(){var $arrUl=_this.find('.col');var $minUl=$arrUl.eq(0);$arrUl.each(function(index,elem){if($(elem).height()<$minUl.height()){$minUl=$(elem)}});return $minUl}function loadDom(){var listContainer=$("#container .col"),imgs=options.getImgData();for(var i=0,len=imgs.length;i<len;i+=1){var html='';html='<li><img src="'+imgs[i]+'" /></li>';$minUl=getMinUl();$minUl.append(html)}}$(window).on("scroll",function(){$minUl=getMinUl();if($minUl.height()<=$(window).scrollTop()+$(window).height()){loadDom()}});loadDom()}})(jQuery);